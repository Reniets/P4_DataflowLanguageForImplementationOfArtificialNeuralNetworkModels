block Main {
    mychannel:in in;
    mychannel:out out;

    blueprint () {
        blueprint param = draw B2;

        this.in -> build B1(B2) -> this.out;
    }
}

block B1 {
    mychannel:in in;
    mychannel:out out;

    blueprint (blueprint ToBuild) {
        doTheThing(ToBuild);
    }

    procedure doTheThing(blueprint ToBuild) {
        this.in -> build ToBuild() -> this.out;
    }
}

block B2 {
    mychannel:in in;
    mychannel:out out;

    blueprint () {
        this.in -> this.out;
    }
}
